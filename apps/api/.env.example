# ===========================================
# SmartDuka API Environment Variables
# ===========================================
# Copy this file to .env.local and fill in your values

# Database
# MongoDB connection string (required)
MONGODB_URI=mongodb://localhost:27017/smartduka

# Authentication
# JWT secret key - CHANGE THIS IN PRODUCTION!
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_EXPIRES=7d

# Server Configuration
PORT=5000
NODE_ENV=development

# CORS Configuration
# Comma-separated list of allowed origins
CORS_ORIGIN=http://localhost:3000

# M-Pesa/Daraja API Configuration
# Environment: 'sandbox' for testing, 'production' for live
MPESA_ENV=sandbox

# Sandbox credentials (for testing)
# Get your credentials from https://developer.safaricom.co.ke/
MPESA_CONSUMER_KEY=your-mpesa-consumer-key
MPESA_CONSUMER_SECRET=your-mpesa-consumer-secret

# Sandbox Paybill shortcode and passkey
MPESA_SHORTCODE=174379
MPESA_PASSKEY=bfb279f9aa9bdbcf158e97dd71a467cd2e0c893059b10f78e6b72ada1ed2c919

# Callback URL (use ngrok for local testing)
# Run: pnpm ngrok:watch (in separate terminal after starting ngrok)
# Or manually set your ngrok URL:
MPESA_CALLBACK_URL=https://8a97f6ac48a1.ngrok-free.app/payments/mpesa/callback

# M-Pesa Credential Encryption Key (32 bytes / 64 hex chars)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# REQUIRED for encrypting shop-specific M-Pesa credentials
MPESA_ENCRYPTION_KEY=

# M-Pesa Reconciliation Service
# Set to 'false' to disable automatic reconciliation
MPESA_RECONCILIATION_ENABLED=true

# Google OAuth (optional)
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_CALLBACK_URL=http://localhost:5000/api/v1/auth/google/callback

# Super Admin Setup
SUPER_ADMIN_EMAIL=admin@smartduka.com
SUPER_ADMIN_PASSWORD=change-this-password

# Error Tracking (optional)
SENTRY_DSN=

# Rate Limiting
THROTTLE_TTL=60000
THROTTLE_LIMIT=100

# ===========================================
# Email/SMTP Configuration
# ===========================================
# For Gmail: Use App Password (not your regular password)
# 1. Go to https://myaccount.google.com/security
# 2. Enable 2-Step Verification
# 3. Go to App passwords: https://myaccount.google.com/apppasswords
# 4. Create a new app password for "Mail"
# 5. Use that 16-character password below

SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=smartdukainfo@gmail.com
SMTP_PASS=your-16-char-app-password
SMTP_FROM=SmartDuka <smartdukainfo@gmail.com>

# Frontend URL (for email links)
FRONTEND_URL=http://localhost:3000

# ===========================================
# Production URLs
# ===========================================
# Frontend: https://smartduka-eta.vercel.app
# Backend: https://smartduka-91q6.onrender.com
